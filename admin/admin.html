<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>لوحة التحكم - القنوات</title>

<style>
body{
  margin:0;
  font-family: "Cairo", sans-serif;
  background:#0d1117;
  color:#fff;
}

header{
  background:#161b22;
  padding:15px;
  text-align:center;
  font-size:20px;
  font-weight:bold;
}

.container{
  padding:15px;
  max-width:1100px;
  margin:auto;
}

.form{
  background:#161b22;
  padding:15px;
  border-radius:12px;
  margin-bottom:15px;
}

.form input{
  width:100%;
  padding:10px;
  margin:5px 0;
  border-radius:8px;
  border:none;
  outline:none;
}

.form button{
  padding:10px 20px;
  border:none;
  border-radius:8px;
  background:#238636;
  color:#fff;
  font-weight:bold;
  cursor:pointer;
}

table{
  width:100%;
  border-collapse:collapse;
  background:#161b22;
  border-radius:12px;
  overflow:hidden;
}

th,td{
  padding:10px;
  border-bottom:1px solid #30363d;
  text-align:center;
}

th{
  background:#0d1117;
}

button.edit{
  background:#1f6feb;
  border:none;
  padding:6px 10px;
  border-radius:6px;
  color:#fff;
  cursor:pointer;
}

button.delete{
  background:#da3633;
  border:none;
  padding:6px 10px;
  border-radius:6px;
  color:#fff;
  cursor:pointer;
}
</style>
</head>

<body>

<header>لوحة التحكم - إدارة القنوات</header>

<div class="container">

<div class="form">
  <input id="name" placeholder="اسم القناة">
  <input id="url" placeholder="رابط البث">
  <input id="ua" placeholder="User-Agent">
  <input id="ref" placeholder="Referer">
  <input id="origin" placeholder="Origin">
  <button onclick="addChannel()">➕ إضافة القناة</button>
</div>

<table>
<thead>
<tr>
<th>#</th>
<th>اسم القناة</th>
<th>الرابط</th>
<th>الهيدرز</th>
<th>تحكم</th>
</tr>
</thead>
<tbody id="channels"></tbody>
</table>

</div>

<script>
let data = JSON.parse(localStorage.getItem("channels")) || [];

function save(){
  localStorage.setItem("channels", JSON.stringify(data));
  render();
}

function addChannel(){
  let name = document.getElementById("name").value.trim();
  let url = document.getElementById("url").value.trim();
  if(!name || !url) return alert("أدخل البيانات كاملة");

  data.push({
    id: Date.now(),
    name,
    url,
    headers:{
      "User-Agent": document.getElementById("ua").value,
      "Referer": document.getElementById("ref").value,
      "Origin": document.getElementById("origin").value
    }
  });

  document.querySelectorAll(".form input").forEach(i=>i.value="");
  save();
}

function del(id){
  if(!confirm("حذف القناة؟")) return;
  data = data.filter(c=>c.id!==id);
  save();
}

function edit(id){
  let ch = data.find(c=>c.id===id);
  let name = prompt("اسم القناة", ch.name);
  let url = prompt("الرابط", ch.url);
  let ua = prompt("User-Agent", ch.headers["User-Agent"]);
  let ref = prompt("Referer", ch.headers["Referer"]);
  let origin = prompt("Origin", ch.headers["Origin"]);

  if(!name || !url) return;

  ch.name = name;
  ch.url = url;
  ch.headers = {
    "User-Agent": ua,
    "Referer": ref,
    "Origin": origin
  };

  save();
}

function render(){
  let html = "";
  data.forEach((c,i)=>{
    html += `
      <tr>
        <td>${i+1}</td>
        <td>${c.name}</td>
        <td style="max-width:220px;overflow:hidden;text-overflow:ellipsis;">${c.url}</td>
        <td>
          UA: ${c.headers["User-Agent"] || "-"}<br>
          Ref: ${c.headers["Referer"] || "-"}<br>
          Or: ${c.headers["Origin"] || "-"}
        </td>
        <td>
          <button class="edit" onclick="edit(${c.id})">تعديل</button>
          <button class="delete" onclick="del(${c.id})">حذف</button>
        </td>
      </tr>
    `;
  });
  document.getElementById("channels").innerHTML = html;
}

render();
</script>

</body>
</html>
